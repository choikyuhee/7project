<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="mapper.shop">
	<resultMap id="shopResult" type="shopVO">
		<result property="p_no" column="p_no"/>
		<result property="p_name" column="p_name"/>
		<result property="p_price" column="p_price"/>
		<result property="p_category" column="p_category"/>
		<result property="p_content" column="p_content"/>
		<result property="p_option" column="p_option"/>
		<result property="p_filename" column="p_filename"/>
		<result property="p_stock" column="p_stock"/>
		<result property="p_thumb" column="p_thumb"/>
	</resultMap>
	
	<select id="shopList" resultMap="shopResult">
		<![CDATA[
			select*from products
			order by p_no desc
		]]>
	</select>
	
	<select id="prodInfo" parameterType="shopVO" resultMap="shopResult">
		<![CDATA[
			select*from products
			where p_no = #{p_no}
		]]>
	</select>
	
	<insert id="prodReg" parameterType="shopVO">
		<![CDATA[
			insert into products(p_no, p_name, p_price, p_category, p_content, p_option, p_stock)
			values (null, #{p_name}, #{p_price}, #{p_category}, #{p_content}, #{p_option}, #{p_stock})
		]]>
	</insert>
	
	<resultMap id="orderResult" type="orderVO">
		<result property="o_no" column="o_no"/>
		<result property="o_date" column="o_date"/>
		<result property="o_price" column="o_price"/>
		<result property="o_name" column="o_name"/>
		<result property="o_phone" column="o_phone"/>
		<result property="o_count" column="o_count"/>
		<result property="p_no" column="p_no"/>
		<result property="u_id" column="u_id"/>
	</resultMap>
	
	<select id="orderList" resultMap="orderResult">
		<![CDATA[
			select*from orderr
			order by o_no desc
		]]>
	</select>
	
	<select id="orderView" parameterType="orderVO" reusultMap="orderResult">
		<![CDATA[
			select * from orderr
			where 
			o_no = ${o_no}
		]]>
	</select>
	
	<insert id="prodBuy" parameterType="orderVO">
		<![CDATA[
			insert into orderr(o_no, o_date, o_price, o_name, o_phone, o_count, p_no, u_id)
			values(null, now(), #{o_price}, #{o_name}, #{o_phone}, #{o_coutn}, #{p_no}, #{u_id})
		]]>
	</insert>
	
</mapper>